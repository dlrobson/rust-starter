services:
  devcontainer:
    container_name: ${PROJECT_NAME:?}-${USER:?}
    build:
      pull: true
      dockerfile: devcontainer.Dockerfile
      args:
        USER: ${USER:?}
        UID: ${UID:?}
        GID: ${GID:?}
    volumes:
      - ..:/workspaces/${PROJECT_NAME:?}:cached
    command: "bash -c 'trap exit TERM; sleep infinity & wait;'"
